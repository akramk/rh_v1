#{extends 'main.html' /}
#{set title:'Home' /}

<div class="container">
		<table class="table table-hover">
		  <thead>
		    <tr>  	
		      <th>Title</th>     
		      <th>Date</th>
		      <th>Location</th>
		      <th>Seeker Applied</th>
		      <th>seeker Required</th>		      
		      <th>Post</th> 
		      <th>Mate</th>
		      <th>End Time </th>
		      <th>Start Time</th>
		    
		      
		    </tr>
		  </thead>
		  <tbody id="giveHelpPostTable">
		    #{list items:seekHelpPost, as:'p'}
		    <tr>
		      <td><a href="@{GiveHelpController.matePostShowDetail(p.id)}">${p.title}</a></td>  		        
		      <td>${p.postdate.format('dd/MM/yyyy')}</td>
		      <td>${p.location}</td>
		      <td>${p.seekersApplied}</td>
		      <td>${p.seekersRequired}</td>		      
		      <td>${p.post}</td>
			  <td>${p.postedBy.userMate.firstName}</td>	
		      <td>${p.timeEnd}</td>
		      <td>${p.timeStart}</td>
		      <td>
		      </td>
		    </tr>
		    #{/list}
		  </tbody>
		</table>
</div>

#{if session.get("userType") == "seeker"}
<form id="seekHelpRedirForm" action="/SeekHelpController/seekHelp" enctype="multipart/form-data" >

  <div id='seekHelpRedirForm_seeker_errorloc' style="color: red;" class='error_strings'>    
  </div>
  <label for="seeker">Seeker Name:</label>
  <input class="form-control"  type="text" name="seeker" value='${session.get("userName")}' readonly />
  <br>
  
  <div id='seekHelpRedirForm_postDate_errorloc' style="color: red;" class='error_strings'>    
  </div>
  <label for="postDate">Date:</label>
  <input class="form-control"  type="text" name="postDate" id="datepicker" value="" />
  <br>
  
  <div id='seekHelpRedirForm_timeStart_errorloc' style="color: red;" class='error_strings'>    
  </div>
  <label for="timeStart">Start time:</label>
  <input class="form-control"  type="text" name="timeStart" id="timeStart" value="" />
  <br>
  
 <div id='seekHelpRedirForm_timeEnd_errorloc' style="color: red;" class='error_strings'>   
 </div>  
  
  <label for="timeEnd">End time:</label>
  <input class="form-control"  type="text" name="timeEnd" id="timeEnd" value="" />
  <br>
   
 <div id='seekHelpRedirForm_location_errorloc' style="color: red;" class='error_strings'>
 </div>
 <label for="location">Location:</label>
 <input class="form-control"  type="text" name="location" value="" />
  <br>
  
 <div id='seekHelpRedirForm_matesRequired_errorloc' style="color: red;" class='error_strings'> 
</div>
  <label for="matesRequired">Number of mates:</label>
  <input class="form-control"  type="number" name="matesRequired" min=1 />
  <br>
  
   <div id='seekHelpRedirForm_title_errorloc' style="color: red;" class='error_strings'>
  </div>
  <label for="title">Title:</label>
  <input class="form-control"  type="text" name="title" value="" />
  <br>
  
  
  <div id='seekHelpRedirForm_post_errorloc' style="color: red;" class='error_strings'>  
  </div>  
  <label for="post">Message:</label>
  <textarea class="form-control"  name="post"  style="height: 81px; width: 251px; ">    
  </textarea>
  <br> 
  
  <div class="form-group">
    <input type="submit" class="btn btn-default"  value="save" />
  </div>
  
</form>
#{/if}


#{else}
<form id="seekHelpRedirForm" action="/SeekHelpController/seekHelp" enctype="multipart/form-data" >
<h2 style="color:red;">Posting for Seeker only.</h2>
</form>
#{/else}


<script language="JavaScript" type="text/javascript">
$('#timeStart').timepicker({ 'timeFormat': 'H:i:s' });
$('#timeEnd').timepicker({ 'timeFormat': 'H:i:s' });
// $('#timeEnd').on('changeTime', function() {
//     var strtTm=$('#timeStart').val();
//     var endTm=$('#timeEnd').val();
//     if(endTm<=strtTm){
//     	alert("End time should be greater than Start time");
//     }
// });
$('#seekHelpRedirForm').submit(function(event){
	 var strtTm=$('#timeStart').val();
	 var endTm=$('#timeEnd').val();
	 if(endTm<=strtTm){
	 	alert("End time should be greater than Start time");
	 	event.preventDefault();
		return false;
	 }
	 
});
  var frmvalidator  = new Validator("seekHelpRedirForm");
  frmvalidator.EnableOnPageErrorDisplay();
  frmvalidator.EnableMsgsTogether();
 
  frmvalidator.addValidation("seeker","req","Please enter your  Name");
  frmvalidator.addValidation("seeker","maxlen=50","For Name, Max length is 50");
  
  frmvalidator.addValidation("postDate","req","Please enter Date");
  
  frmvalidator.addValidation("timeStart","req","Please enter start time");
  
  frmvalidator.addValidation("timeEnd","req","Please enter end time");
 
  frmvalidator.addValidation("location","req","Please enter location");
  
  frmvalidator.addValidation("matesRequired","req","Please enter number of mates you required");
  frmvalidator.addValidation("matesRequired","maxlen=50");
  frmvalidator.addValidation("matesRequired","numeric"); 
  
  frmvalidator.addValidation("title","req","Please enter title");
  
  frmvalidator.addValidation("post","req","Please enter your  message");
  frmvalidator.addValidation("post","maxlen=1000");
  
</script>